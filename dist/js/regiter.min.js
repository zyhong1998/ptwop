$(function(){var t=$("#username"),a=$("#pwd"),r=$("#email"),n=$("#nickname"),l=!1,o=!1,s=!1,c=!1;function i(e,a){e.css({border:"1px solid red"}).next().removeClass("error").text(a).css({color:"red"})}function u(e){e.css({border:"1px solid green"}).next().addClass("error")}t.blur(function(){var r=$(this).val();r?/^[a-zA-Z]\w{2,11}$/.test(r)?($(this).css({border:"1px solid green"}).next().addClass("error"),$.ajax({url:"http://127.0.0.1:8848/accrepeat.php?username=hhha",type:"GET",data:"username="+r,success:function(e){var a;l="fail"==e?(a=Math.floor(899*Math.random()+100),i(t,"用户名重复："+r+a),!1):(u(t),!0)},error:function(e){}})):(i(t,"用户名不合法"),l=!1):(i(t,"用户名不能为空"),l=!1)}),a.blur(function(){var e=a.val();o=e?/^\w{4,12}$/.test(e)?(u(a),!0):(i(a,"请输入合法密码"),!1):(i(a,"请输入密码"),!1)}),r.blur(function(){var e=r.val();s=e?/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(e)?(u(r),!0):(i(r,"请输入合法邮箱"),!1):(i(r,"请输入邮箱"),!1)}),n.blur(function(){var e=n.val();c=e?/^[a-zA-Z]\w{2,11}$/.test(e)?(u(n),!0):(i(n,"请输入合法昵称"),!1):(i(n,"请输入昵称"),!1)}),$("#regBtn").click(function(){return 0==$("#exampleCheck1").prop("checked")?(alert("你未勾选用户协议"),!1):!!(l&&o&&s&&c)&&(console.log(11),void $.ajax({url:"http://127.0.0.1:8848/reg.php",type:"POST",data:{username:t.val(),pwd:a.val(),email:r.val(),nickname:n.val()},success:function(e){"ok"==e?(alert("恭喜您！"+t.val()),location.href="./login.html"):alert("注册失败，请稍后重试")}}))})});