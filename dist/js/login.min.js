window.onload=function(){e("verify");var a,n=e("randomCode");e("errorInfo"),e("confirm");function e(n){return document.getElementById(n)}function o(){a=[];for(var n=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],e=0;e<4;e++){var o=Math.floor(36*Math.random());a.push(n[o])}return a.join("")}function i(){n.innerHTML=o()}function r(){var n=a.join(""),e=$("#username").val(),o=$("#pwd").val(),r=$("#verify").val(),t=$("#exampleCheck1").prop("checked");return e&&o&&(n!=r?(alert("验证码不正确，重新输入"),void i()):0==t?(alert("你未勾选用户协议"),void i()):void $.ajax({url:"http://127.0.0.1:8848/login.php",type:"POST",data:{username:e,pwd:o},success:function(n){"fail"===n?(alert("用户名或密码错误"),i()):(localStorage.setItem("username",e),localStorage.setItem("uid",n),alert(e+"欢迎回家。"),location.href="/#")},error:function(n){}}))}n.innerHTML=o(),n.onclick=function(){i()},$("#loginBtn").click(function(){r()}),$(document).keyup(function(n){13==n.keyCode&&r()})};